<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript">
	atOptions = {
		'key' : '9f5ed8c42fb0de51562560e647d5668f',
		'format' : 'iframe',
		'height' : 60,
		'width' : 468,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/9f5ed8c42fb0de51562560e647d5668f/invoke.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Raksha Bandhan!</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tangerine:wght@700&family=Poppins:wght@400;600&family=Dancing+Script:wght@700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            text-align: center;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Popping Hearts Background */
        .heart-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .heart {
            position: absolute;
            width: 25px;
            height: 25px;
            transform: rotate(-45deg);
            animation: floatUp 8s linear forwards;
        }

        .heart::before,
        .heart::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            border-radius: 50%;
        }

        .heart::before { top: -12px; left: 0; }
        .heart::after { top: 0; left: 12px; }

        /* Darker, Multi-Colored Hearts */
        .heart-color-1, .heart-color-1::before, .heart-color-1::after { background: #e91e63; } /* Deep Pink */
        .heart-color-2, .heart-color-2::before, .heart-color-2::after { background: #ff9800; } /* Festive Orange */
        .heart-color-3, .heart-color-3::before, .heart-color-3::after { background: #9c27b0; } /* Royal Purple */
        .heart-color-4, .heart-color-4::before, .heart-color-4::after { background: #c2185b; } /* Magenta */


        /* Decoration elements */
        .decoration {
            position: fixed;
            background-size: cover;
            opacity: 0.15;
            pointer-events: none;
            z-index: 1;
        }
        .deco-top-left {
            top: -20px;
            left: -20px;
            width: 250px;
            height: 250px;
            background-image: url('https://www.transparentpng.com/thumb/indian-wedding/indian-wedding-background-design-photo-21.png');
            transform: rotate(180deg);
        }
        .deco-bottom-right {
            bottom: -50px;
            right: -50px;
            width: 300px;
            height: 300px;
            background-image: url('https://www.transparentpng.com/thumb/indian-wedding/indian-wedding-background-design-photo-21.png');
        }

        .container {
            max-width: 500px;
            margin: 20px auto;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            padding: 40px;
            border-radius: 30px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            position: relative;
            z-index: 2;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        h1 {
            font-family: 'Tangerine', cursive;
            color: #d81b60;
            font-size: 5em;
            margin: 0 0 15px 0;
            font-weight: 700;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.1);
        }
        
        .image-container {
            position: relative;
            display: inline-block;
            margin-bottom: 25px;
            animation: zoomIn 1s ease-in-out;
        }

        .rakhi-gif {
            width: 100%;
            max-width: 260px;
            border-radius: 50%;
            display: block;
            box-shadow: 0 0 15px 10px rgba(255, 255, 255, 0.7);
            border: 5px solid #fff;
        }

        .glitter {
            position: absolute;
            width: 8px;
            height: 8px;
            background: transparent;
            border-radius: 50%;
            opacity: 0;
            animation: sparkle 2s infinite;
        }
        
        .glitter-type-1 { box-shadow: 0 0 7px 2px #fff, 0 0 12px 4px #ff8fab, 0 0 18px 6px #f8bbd0; }
        .glitter-type-2 { box-shadow: 0 0 7px 2px #fff, 0 0 12px 4px #ffd54f, 0 0 18px 6px #ffecb3; }
        .glitter-type-3 { box-shadow: 0 0 7px 2px #fff, 0 0 12px 4px #b39ddb, 0 0 18px 6px #d1c4e9; }

        p {
            color: #333;
            font-size: 1.15em;
            line-height: 1.8;
            margin-bottom: 30px;
            animation: fadeInUp 1s ease-in-out forwards;
            opacity: 0;
        }
        
        #recipient-name-container { display: inline-block; }
        
        .recipient-char {
            display: inline-block;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: #d81b60;
            font-size: 1.3em;
            opacity: 0;
            animation: dropIn 0.5s forwards;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .name-input {
            width: 85%;
            padding: 15px;
            border: none;
            border-bottom: 3px solid #f06292;
            margin-bottom: 25px;
            font-size: 1.1em;
            text-align: center;
            font-family: 'Poppins', sans-serif;
            background-color: #fff5f7;
            border-radius: 10px 10px 0 0;
            transition: all 0.3s;
        }
        
        .name-input:focus {
            outline: none;
            border-bottom: 3px solid #d81b60;
            background-color: #ffffff;
        }

        .btn {
            background: linear-gradient(45deg, #f5508a, #f783ac);
            color: #fff;
            padding: 16px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 8px 25px rgba(233, 30, 99, 0.3);
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .btn.back-btn {
             background: linear-gradient(45deg, #bdbdbd, #9e9e9e);
             box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .btn.copy-btn {
            background: linear-gradient(45deg, #4CAF50, #66BB6A);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
        }

        .btn.whatsapp-btn {
            background: linear-gradient(45deg, #25D366, #128C7E);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.3);
        }

        .btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 12px 30px rgba(233, 30, 99, 0.4);
        }
        
        .btn.back-btn:hover {
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
        }

        .btn.copy-btn:hover {
            box-shadow: 0 12px 30px rgba(76, 175, 80, 0.4);
        }

        .btn.whatsapp-btn:hover {
            box-shadow: 0 12px 30px rgba(37, 211, 102, 0.4);
        }

        #popup {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px);
            z-index: 10;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }
        
        #popup-content {
            background: #fff;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            position: relative;
            animation: slideInUp 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
            max-width: 90%;
            width: 480px;
        }
        
        #popup-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        #share-section {
            margin-top: 25px;
        }

        #share-section p {
            color: #555;
            margin-bottom: 20px;
            font-size: 1em;
        }

        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .success-message {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 15px;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .success-message.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Ad containers */
        .ad-container {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
        }

        .ad-top {
            margin-bottom: 20px;
        }

        .ad-bottom {
            margin-top: 20px;
        }
        
        @keyframes floatUp {
            from { transform: translateY(100vh) rotate(-45deg); opacity: 1; }
            to { transform: translateY(-10vh) rotate(-45deg); opacity: 0; }
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; }}
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.7); } to { opacity: 1; transform: scale(1); }}
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); }}
        @keyframes slideInUp { from { transform: translateY(50px) scale(0.95); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; }}
        @keyframes dropIn { to { opacity: 1; transform: translateY(0) scale(1); }}

        /* Mobile responsiveness */
        @media (max-width: 600px) {
            .container {
                margin: 10px;
                padding: 20px;
            }
            
            h1 {
                font-size: 3.5em;
            }
            
            .btn {
                padding: 12px 25px;
                font-size: 1em;
                margin: 3px;
            }
            
            #popup-content {
                padding: 25px;
                margin: 20px;
            }
            
            .share-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

    </style>
</head>
<body>

    <!-- Top Ad -->
    <div class="ad-container ad-top">
        <script type="text/javascript">
            atOptions = {
                'key' : '9f5ed8c42fb0de51562560e647d5668f',
                'format' : 'iframe',
                'height' : 60,
                'width' : 468,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/9f5ed8c42fb0de51562560e647d5668f/invoke.js"></script>
    </div>

    <div class="heart-container" id="heart-container"></div>
    <div class="decoration deco-top-left"></div>
    <div class="decoration deco-bottom-right"></div>

    <div class="container">
        <h1>Happy Raksha Bandhan!</h1>
        <div class="image-container" id="image-container">
            <img src="raksha-bandhan.jpg" alt="Happy Raksha Bandhan" class="rakhi-gif">
        </div>
        <p id="greeting-message">Sending a thread of love to celebrate our special bond. May our connection grow stronger and our hearts fonder. Wishing you a joyful and blessed Raksha Bandhan!</p>
        <button class="btn" onclick="openPopup()">✨ Create a Personalized Wish ✨</button>
    </div>

    <!-- Bottom Ad -->
    <div class="ad-container ad-bottom">
        <script type="text/javascript">
            atOptions = {
                'key' : '9f5ed8c42fb0de51562560e647d5668f',
                'format' : 'iframe',
                'height' : 60,
                'width' : 468,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/9f5ed8c42fb0de51562560e647d5668f/invoke.js"></script>
    </div>

    <div id="popup">
        <div id="popup-content">
            <h2 style="font-family: 'Tangerine', cursive; color: #d81b60; font-size: 3.5em; margin-top:0;">Share a Special Wish!</h2>
            <p style="color: #555; margin-bottom: 20px;">Enter your name to create a magical Rakhi greeting for your sibling.</p>
            <input type="text" id="senderName" class="name-input" placeholder="Enter Your Name Here">
            <div id="popup-controls">
                <button class="btn back-btn" onclick="closePopup()">Back</button>
                <button class="btn" onclick="generateLink()">Generate Link</button>
            </div>
            <div id="share-section" style="display: none;">
                <p>Your personalized link is ready! Share the magic:</p>
                <div class="share-buttons">
                    <button class="btn copy-btn" onclick="copyLink()">📋 Copy Link</button>
                    <a id="whatsapp-share-link" href="#" class="btn whatsapp-btn" target="_blank">📱 Share on WhatsApp</a>
                </div>
                <div id="success-message" class="success-message"></div>
            </div>
        </div>
    </div>

    <script>
        let generatedLink = '';

        // --- ANIMATION SCRIPTS ---

        function createHearts() {
            const heartContainer = document.getElementById('heart-container');
            const heartColors = ['heart-color-1', 'heart-color-2', 'heart-color-3', 'heart-color-4'];
            
            setInterval(() => {
                const heart = document.createElement('div');
                const randomColor = heartColors[Math.floor(Math.random() * heartColors.length)];
                
                heart.classList.add('heart', randomColor);
                
                heart.style.left = `${Math.random() * 100}vw`;
                heart.style.animationDuration = `${Math.random() * 3 + 5}s`;
                heart.style.opacity = Math.random() * 0.7 + 0.3;
                heart.style.transform = `scale(${Math.random() * 0.8 + 0.5}) rotate(-45deg)`;
                
                heartContainer.appendChild(heart);

                setTimeout(() => {
                    heart.remove();
                }, 8000);
            }, 300);
        }

        function createGlitters() {
            const imageContainer = document.getElementById('image-container');
            setInterval(() => {
                const glitter = document.createElement('div');
                const type = Math.ceil(Math.random() * 3);
                glitter.classList.add('glitter', `glitter-type-${type}`);
                glitter.style.top = `${Math.random() * 100}%`;
                glitter.style.left = `${Math.random() * 100}%`;
                glitter.style.animationDelay = `${Math.random() * 2}s`;
                imageContainer.appendChild(glitter);
                setTimeout(() => glitter.remove(), 2000);
            }, 150);
        }

        function animateRecipientName(name) {
            const container = document.createElement('span');
            container.id = 'recipient-name-container';
            name.split('').forEach((char, index) => {
                const span = document.createElement('span');
                span.className = 'recipient-char';
                span.innerHTML = char === ' ' ? ' ' : char;
                span.style.animationDelay = `${index * 0.08 + 0.5}s`;
                container.appendChild(span);
            });
            return container;
        }

        // --- GREETING CARD LOGIC ---

        window.onload = function() {
            createHearts();
            createGlitters();

            const urlParams = new URLSearchParams(window.location.search);
            const name = urlParams.get('name');
            if (name) {
                const greetingMessage = document.getElementById('greeting-message');
                const animatedName = animateRecipientName(decodeURIComponent(name));
                greetingMessage.innerHTML = 'I ';
                greetingMessage.appendChild(animatedName);
                greetingMessage.append(' am sending a thread of love to celebrate our special bond. May our connection grow stronger and our hearts fonder. Wishing you a joyful and blessed Raksha Bandhan!');
            }
        };

        function openPopup() {
            document.getElementById('popup').style.display = 'flex';
            document.getElementById('share-section').style.display = 'none';
            document.getElementById('senderName').value = '';
        }
        
        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }

        function generateLink() {
            const senderName = document.getElementById('senderName').value;
            if (senderName.trim() === "") {
                alert("Please enter your name!");
                return;
            }

            const baseUrl = window.location.origin + window.location.pathname;
            const personalizedLink = `${baseUrl}?name=${encodeURIComponent(senderName)}`;
            generatedLink = personalizedLink;

            const message = `💖 You've received a magical Raksha Bandhan wish from ${senderName}! 💖\n\nCheck it out: ${personalizedLink}`;
            const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(message)}`;

            document.getElementById('whatsapp-share-link').href = whatsappUrl;
            document.getElementById('share-section').style.display = 'block';
        }

        function copyLink() {
            if (!generatedLink) {
                alert('Please generate a link first!');
                return;
            }

            navigator.clipboard.writeText(generatedLink).then(function() {
                showSuccessMessage('Link copied to clipboard! 📋✨');
            }, function(err) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = generatedLink;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showSuccessMessage('Link copied to clipboard! 📋✨');
                } catch (err) {
                    alert('Failed to copy link. Please copy manually: ' + generatedLink);
                }
                document.body.removeChild(textArea);
            });
        }

        function showSuccessMessage(message) {
            const successDiv = document.getElementById('success-message');
            successDiv.textContent = message;
            successDiv.classList.add('show');
            
            setTimeout(() => {
                successDiv.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
